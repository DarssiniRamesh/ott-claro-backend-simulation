{"is_source_file": true, "format": "JavaScript", "description": "User controller containing functions for user management operations including registration, login, profile updates, password changes, and logout functionalities.", "external_files": ["../models/user.model", "../middleware/error.middleware", "../utils/password.util", "../config/env.config"], "external_methods": ["User.findOne", "User.findById", "User.prototype.generateAuthTokens", "User.prototype.getPublicProfile", "User.prototype.comparePassword"], "published": ["registerUser", "loginUser", "refreshToken", "getCurrentUser", "updateProfile", "changePassword", "logoutUser"], "classes": [], "methods": [{"name": "registerUser", "description": "Registers a new user by validating the input, checking for existing users, and saving the user to the database."}, {"name": "loginUser", "description": "Logs in a user by validating credentials and generating authentication tokens."}, {"name": "refreshToken", "description": "Refreshes access tokens using a valid refresh token."}, {"name": "getCurrentUser", "description": "Returns the current user's profile information."}, {"name": "updateProfile", "description": "Updates the user's profile information."}, {"name": "changePassword", "description": "Changes the user's password after validating the current password."}, {"name": "logoutUser", "description": "Logs out a user by invalidating their refresh token."}], "calls": ["ApiError", "jwt.verify"], "search-terms": ["user", "authentication", "profile management", "registration", "login", "password reset"], "state": 2, "file_id": 25, "knowledge_revision": 37, "git_revision": "", "ctags": [{"_type": "tag", "name": "User", "path": "/home/kavia/workspace/ott-claro-backend-simulation/src/controllers/user.controller.js", "pattern": "/^const User = require('..\\/models\\/user.model');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "changePassword", "path": "/home/kavia/workspace/ott-claro-backend-simulation/src/controllers/user.controller.js", "pattern": "/^const changePassword = async (req, res, next) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "config", "path": "/home/kavia/workspace/ott-claro-backend-simulation/src/controllers/user.controller.js", "pattern": "/^const config = require('..\\/config\\/env.config');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "decoded", "path": "/home/kavia/workspace/ott-claro-backend-simulation/src/controllers/user.controller.js", "pattern": "/^    let decoded;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "emailRegex", "path": "/home/kavia/workspace/ott-claro-backend-simulation/src/controllers/user.controller.js", "pattern": "/^    const emailRegex = \\/^\\\\S+@\\\\S+\\\\.\\\\S+$\\/;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "existingUser", "path": "/home/kavia/workspace/ott-claro-backend-simulation/src/controllers/user.controller.js", "pattern": "/^    const existingUser = await User.findOne({ email });$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getCurrentUser", "path": "/home/kavia/workspace/ott-claro-backend-simulation/src/controllers/user.controller.js", "pattern": "/^const getCurrentUser = async (req, res, next) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "isPasswordValid", "path": "/home/kavia/workspace/ott-claro-backend-simulation/src/controllers/user.controller.js", "pattern": "/^    const isPasswordValid = await user.comparePassword(currentPassword);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "jwt", "path": "/home/kavia/workspace/ott-claro-backend-simulation/src/controllers/user.controller.js", "pattern": "/^const jwt = require('jsonwebtoken');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "loginUser", "path": "/home/kavia/workspace/ott-claro-backend-simulation/src/controllers/user.controller.js", "pattern": "/^const loginUser = async (req, res, next) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "logoutUser", "path": "/home/kavia/workspace/ott-claro-backend-simulation/src/controllers/user.controller.js", "pattern": "/^const logoutUser = async (req, res, next) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "passwordValidation", "path": "/home/kavia/workspace/ott-claro-backend-simulation/src/controllers/user.controller.js", "pattern": "/^    const passwordValidation = validatePasswordStrength(newPassword);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "passwordValidation", "path": "/home/kavia/workspace/ott-claro-backend-simulation/src/controllers/user.controller.js", "pattern": "/^    const passwordValidation = validatePasswordStrength(password);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "refreshToken", "path": "/home/kavia/workspace/ott-claro-backend-simulation/src/controllers/user.controller.js", "pattern": "/^const refreshToken = async (req, res, next) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "registerUser", "path": "/home/kavia/workspace/ott-claro-backend-simulation/src/controllers/user.controller.js", "pattern": "/^  registerUser,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "registerUser", "path": "/home/kavia/workspace/ott-claro-backend-simulation/src/controllers/user.controller.js", "pattern": "/^const registerUser = async (req, res, next) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "tokens", "path": "/home/kavia/workspace/ott-claro-backend-simulation/src/controllers/user.controller.js", "pattern": "/^    const tokens = await user.generateAuthTokens();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "updateProfile", "path": "/home/kavia/workspace/ott-claro-backend-simulation/src/controllers/user.controller.js", "pattern": "/^const updateProfile = async (req, res, next) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/ott-claro-backend-simulation/src/controllers/user.controller.js", "pattern": "/^    const user = await User.findById(decoded.id).select('+refreshToken');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/ott-claro-backend-simulation/src/controllers/user.controller.js", "pattern": "/^    const user = await User.findById(req.user.id).select('+password');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/ott-claro-backend-simulation/src/controllers/user.controller.js", "pattern": "/^    const user = await User.findById(req.user.id);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/ott-claro-backend-simulation/src/controllers/user.controller.js", "pattern": "/^    const user = await User.findOne({ email }).select('+password');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/ott-claro-backend-simulation/src/controllers/user.controller.js", "pattern": "/^    const user = new User({$/", "language": "JavaScript", "kind": "constant"}], "filename": "/home/kavia/workspace/ott-claro-backend-simulation/src/controllers/user.controller.js", "hash": "378c1a89315867960a84f00efdab32c8", "format-version": 4, "code-base-name": "default", "fields": [{"name": "let decoded;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "registerUser,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"37": ""}]}